<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guildovní Loterie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #111827; /* Tmavě modro-šedá */
        }
        .text-gold {
            color: #f59e0b; /* Jantarová zlatá */
        }
        .card {
            background-color: #1f2937; /* Tmavší šedá */
            border: 1px solid #374151;
        }
        .winner-row {
            background-color: #166534 !important; /* Tmavě zelená pro vítěze */
            color: #f0fdf4;
        }
        .winner-row td {
            font-weight: bold;
        }
        thead th {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <!-- HLAVIČKA -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-6xl font-black text-gold uppercase tracking-wider">Guildovní Loterie Tenebrisia</h1>
            <!-- Datum se nyní vkládá automaticky -->
            <p id="date-display" class="text-lg text-gray-400 mt-2"></p>
        </header>

        <!-- KARTY S INFORMACEMI -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10 text-center">
            <div class="card rounded-lg p-6">
                <h2 class="text-xl font-bold text-gray-400">💰 Jackpot Týdne 💰</h2>
                <p id="jackpot-amount" class="text-4xl font-bold text-gold mt-2">... g</p>
                <p class="text-sm text-gray-500 mt-1">(60% z nově vsazených peněz)</p>
                <p id="rollover-info" class="text-sm text-cyan-400 mt-1"></p>
            </div>
            <div class="card rounded-lg p-6">
                <h2 class="text-xl font-bold text-gray-400">🎲 Vítězné Číslo 🎲</h2>
                <p id="winning-number-display" class="text-4xl font-bold text-white mt-2">?</p>
                <p class="text-sm text-gray-500 mt-1">(Losování v pátek)</p>
            </div>
            <div class="card rounded-lg p-6">
                <h2 class="text-xl font-bold text-gray-400">🏆 Vítěz(ové) 🏆</h2>
                <p id="winner-name" class="text-4xl font-bold text-green-400 mt-2">...</p>
                <p class="text-sm text-gray-500 mt-1">(Gratulujeme!)</p>
            </div>
        </div>

        <!-- TABULKA SE SÁZKAMI -->
        <div class="card rounded-lg p-4 sm:p-6 overflow-x-auto">
            <h2 class="text-2xl font-bold text-center mb-6">Seznam sázek</h2>
            <table class="w-full text-left">
                <thead class="bg-gray-800 border-b border-gray-600">
                    <tr>
                        <th class="p-3 text-sm font-semibold tracking-wide text-center">#</th>
                        <th class="p-3 text-sm font-semibold tracking-wide">Hráč</th>
                        <th class="p-3 text-sm font-semibold tracking-wide text-center">Vklad (g)</th>
                        <th class="p-3 text-sm font-semibold tracking-wide text-center">Vsazené Číslo</th>
                        <th class="p-3 text-sm font-semibold tracking-wide">Poznámka</th>
                    </tr>
                </thead>
                <tbody id="lottery-table-body" class="divide-y divide-gray-700">
                    <!-- Tabulka se vygeneruje automaticky pomocí skriptu níže -->
                </tbody>
            </table>
        </div>
        
    </div>

<script>
// ===================================================================================
// ZDE ZAČÍNÁ TVOJE PRACOVNÍ PLOCHA, VAULT MASTERE!
// ===================================================================================

// KROK 1: Po losování sem zadej vítězné číslo.
// Pokud losování ještě neproběhlo, nech hodnotu `null`.
const winningNumber = null;

// KROK 2: Zde je seznam všech hráčů.
const players = [
    { name: 'Exsqueez', bet: 0, note: 'Nezaplaceno' },
    { name: 'Luxes', bet: 0, note: 'Nezaplaceno' },
    { name: 'Exsqueez', bet: 0, note: 'Nezaplaceno' },
    { name: 'Arny', bet: 0, note: 'Nezaplaceno' },
    { name: 'Suzu', bet: 0, note: 'Nezaplaceno' },
    { name: 'Vecty', bet: 0, note: 'Nezaplaceno' },
    { name: 'Cikynxd', bet: 0, note: 'Nezaplaceno' },
    { name: 'Kubino', bet: 0, note: 'Nezaplaceno' },
    { name: 'Karel', bet: 0, note: 'Nezaplaceno' },
    { name: 'Prochy', bet: 0, note: 'Nezaplaceno' },
    { name: 'Tony101', bet: 0, note: 'Nezaplaceno' },
    { name: 'Maxýý', bet: 0, note: 'Nezaplaceno' },
    { name: 'Lord Inquisittor', bet: 0, note: 'Nezaplaceno' },
  
    
    // { name: 'JménoHráče', bet: ČÍSLO, note: 'Poznámka' },
];

// KROK 3: Sem napiš výchozí vklad pro jednoho hráče.
const entryFee = 5000;

// KROK 4: POKUD NIKDO MINULÝ TÝDEN NEVYHRÁL, zadej sem částku jackpotu, která se přenáší.
// POKUD NĚKDO VYHRÁL, NECH TO NA 0.
const jackpotRollover = 0;

// ===================================================================================
// TÉTO ČÁSTI POD TÍMTO ŘÁDKEM SE UŽ NEDOTÝKEJ (AUTOMATICKÁ MAGIE)
// ===================================================================================

document.addEventListener('DOMContentLoaded', function() {
    // --- AUTOMATICKÁ AKTUALIZACE DATUMU ---
    const getWeekInfo = () => {
        const now = new Date();
        const startOfYear = new Date(now.getFullYear(), 0, 1);
        const pastDaysOfYear = (now - startOfYear) / 86400000;
        const weekNumber = Math.ceil((pastDaysOfYear + startOfYear.getDay() + 1) / 7);

        // Opravená logika, která nemění původní datum
        const monday = new Date(now);
        const day = monday.getDay();
        const diff = monday.getDate() - day + (day === 0 ? -6 : 1); // úprava pro neděli
        monday.setDate(diff);

        const friday = new Date(monday);
        friday.setDate(monday.getDate() + 4);

        const formatDate = (date) => `${date.getDate()}.${date.getMonth() + 1}.`;
        return `Týden ${weekNumber} (${formatDate(monday)} - ${formatDate(friday)})`;
    };
    document.getElementById('date-display').textContent = getWeekInfo();
    // --- KONEC SEKCE S DATUMEM ---


    const tableBody = document.getElementById('lottery-table-body');
    const winners = [];

    players.forEach((player, index) => {
        const row = document.createElement('tr');
        const isEven = index % 2 === 1;
        const isWinner = winningNumber !== null && player.bet === winningNumber;

        row.className = isEven ? 'bg-gray-800 hover:bg-gray-700' : 'hover:bg-gray-700';

        if (isWinner) {
            row.classList.add('winner-row');
            row.classList.add('hover:bg-green-800');
            winners.push(player.name);
        }

        let finalNote = player.note;
        let noteColorClass = 'text-green-400';
        if (isWinner) {
            finalNote = 'VÍTĚZ!';
            noteColorClass = '';
        } else if (player.note.toLowerCase().includes('nezaplaceno')) {
            noteColorClass = 'text-yellow-400';
        }

        row.innerHTML = `
            <td class="p-3 text-sm text-gray-400 text-center">${index + 1}</td>
            <td class="p-3 text-sm font-bold">${player.name}</td>
            <td class="p-3 text-sm text-center">${entryFee.toLocaleString('cs-CZ')}</td>
            <td class="p-3 text-sm text-center font-mono">${player.bet}</td>
            <td class="p-3 text-sm ${noteColorClass}">${finalNote}</td>
        `;
        tableBody.appendChild(row);
    });

    // Aktualizace horních karet
    const payingPlayers = players.filter(p => !p.note.toLowerCase().includes('nezaplaceno'));
    const currentWeekPot = payingPlayers.length * entryFee;
    const prizePool = currentWeekPot * 0.6;
    const totalJackpot = jackpotRollover + prizePool;

    document.getElementById('jackpot-amount').textContent = `${totalJackpot.toLocaleString('cs-CZ')}g`;
    document.getElementById('winning-number-display').textContent = winningNumber !== null ? winningNumber : '?';
    
    let winnerText = 'Zatím nikdo';
    if (winners.length > 0) {
        winnerText = winners.join(', ');
    } else if (winningNumber !== null) {
        winnerText = 'Nikdo nevyhrál!';
    }
    document.getElementById('winner-name').textContent = winnerText;
    
    const rolloverInfo = document.getElementById('rollover-info');
    if (jackpotRollover > 0) {
        rolloverInfo.textContent = `(Včetně ${jackpotRollover.toLocaleString('cs-CZ')}g z minulého týdne)`;
    }
});
</script>

</body>
</html>
